{% extends 'index.html' %}
{% block body %}
<body>
    <h1>Kasam's Routing - Ergebnisse</h1>

    <p><strong>Ihr Fahrzeug:</strong> {{ selected_vehicle.manufacturer + ' ' + selected_vehicle.model + ' ' + selected_vehicle.desc + ' Fuel Type:' + selected_vehicle.fuel_type}}</p>
    <p><strong>Startort:</strong> {{ start_location }} (Koordinaten: {{ start_coordinates }})</p>
    <p><strong>Zielort:</strong> {{ end_location }} (Koordinaten: {{ end_coordinates }})</p>

    {% if route_data.routes %}
        <h2>Routeninformationen Normal:</h2>
        <ul>
            {% for leg in route_data.routes[0].legs %}
                <li><strong>Entfernung:</strong> {{ leg.summary.lengthInMeters / 1000 }} km</li>
                <li><strong>Dauer:</strong> {{ leg.summary.travelTimeInSeconds / 60 }} Minuten</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>Es konnte keine Route gefunden werden.</p>
    {% endif %}

    {% if eco_route_data.routes %}
        <h2>Routeninformationen Eco:</h2>
        <ul>
            {% for leg in eco_route_data.routes[0].legs %}
                <li><strong>Entfernung:</strong> {{ leg.summary.lengthInMeters / 1000 }} km</li>
                <li><strong>Dauer:</strong> {{ leg.summary.travelTimeInSeconds / 60 }} Minuten</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>Es konnte keine Route gefunden werden.</p>
    {% endif %}

    <h2>Map:</h2> 
    <div id="map" class="map"></div>
    <button onclick="toggleLayer()">Routentyp Wechseln</button>

    <h2>Verkehrsflussinformation:</h2>
    {% if traffic_flow_data %}
        <p><strong>Verkehrsflussinformation:</strong> {{ traffic_flow_data.currentTravelTime }} Minuten, Geschwindigkeit: {{ traffic_flow_data.currentSpeed }} km/h</p>
    {% else %}
        <p>Keine Verkehrsflussinformation verf√ºgbar.</p>
    {% endif %}

    <script src="https://api.tomtom.com/maps-sdk-for-web/cdn/6.x/6.25.0/services/services-web.min.js"></script>
    <script src="https://api.tomtom.com/maps-sdk-for-web/cdn/6.x/6.25.0/maps/maps-web.min.js"></script>
    <script>
        var geoJson = {{ geojson_data|safe }};
        var ecoJson = {{ eco_geojson_data|safe }};
    </script>
    <script src="static/js/script.js"></script>
{% endblock %}
